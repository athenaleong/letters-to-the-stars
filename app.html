<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
		</style>
	</head>
	<body>
        <script src="js/three.js"></script>
        <script>
           
            let mouseX = 0;
            let mouseY = 0;
            document.addEventListener("mousemove", (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            });
 
            var scene = new THREE.Scene();
            var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );

            var renderer = new THREE.WebGLRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );
            document.body.appendChild(renderer.domElement);
            renderer.setClearColor(new THREE.Color("#1c1624"));
            var mouse = new THREE.Vector2();
            var raycaster = new THREE.Raycaster();

            const getRandomParticlePos = () => {
                return [Math.random() * getFilmHeight, Math.random() * window.innerHeight]
            }
      
            const geometry = new THREE.BufferGeometry()
            const sprite = new THREE.TextureLoader().load('texture/star-autox50.png')
            const vertices = []

            const createStars = (numOfStars) => {

                for (let i =0; i < numOfStars; i++) {
                    const x = Math.random() * 10 - 5
                    const y = Math.random() * 4 - 2
                    const z = Math.random() * 100 - 50

                    vertices.push(x, y, z)
                }

                geometry.setAttribute( 'position', new THREE.Float32BufferAttribute( vertices, 3 ) );
                material = new THREE.PointsMaterial( {color:'#FFFF00', size: 0.3, sizeAttenuation: true, map: sprite, alphaTest: 0.5, transparent: true } );
                const particles = new THREE.Points(geometry, material)

                scene.add(particles)
            }

            const onMouseMove = (event) => {
                mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
	            mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
            }

        
            createStars(1000);
            camera.position.z = 5;

            //Lights
            const pointLight = new THREE.PointLight(0xFFFFFF);
            pointLight.position.x = 10;
            pointLight.position.y = 50;
            pointLight.position.z = 130;
            scene.add(pointLight);

            var animate = function () {
                requestAnimationFrame( animate );
                const intersects = raycaster.intersectObjects( scene.children );

	            for ( let i = 0; i < intersects.length; i ++ ) {
		            intersects[ i ].object.material.color.set(0xff0000);
	            }

                renderer.render( scene, camera );
            };

            animate();

            function onWindowResize() {

            windowHalfX = window.innerWidth / 2;
            windowHalfY = window.innerHeight / 2;

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize( window.innerWidth, window.innerHeight );

            }
        </script>
	</body>
</html>